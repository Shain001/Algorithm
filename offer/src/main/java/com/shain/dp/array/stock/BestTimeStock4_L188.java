package com.shain.dp.array.stock;

public class BestTimeStock4_L188 {
    /**
     * ä¸ stock 3 æ˜¯ä¸€æ ·çš„ã€‚
     *
     * stock 3 ä¸­ æ˜¯é™åˆ¶ä¹°å–2æ¬¡ï¼Œ
     * æ‰€ä»¥ å¯¹äº æ¯ä¸€å¤©ï¼Œ æˆ‘ä»¬åˆ›å»ºäº† 2* 2 + 1 = 5 ç§çŠ¶æ€ã€‚ å¯¹åº” 5 ä¸ªcolumnã€‚
     * é‚£ä¹ˆ å½“é™åˆ¶ k æ¬¡ï¼Œ æˆ‘ä»¬åˆ™éœ€åˆ›å»º 2 * k + 1 ğŸ€„ç§çŠ¶æ€ã€‚ å› ä¸º æ²¡æ¬¡ä¹°å–å¯¹åº”ä¸¤ä¸ªçŠ¶æ€ ï¼ˆå¦‚æœå¿˜äº†çœ‹ stock3 å°±æƒ³èµ·æ¥äº†ï¼‰ã€‚
     *
     * è¿›è€Œï¼Œ æ— éæ˜¯ æ›´æ–°dpæ—¶ï¼Œ åˆ†å¥‡å¶æ›´æ–°ã€‚ å¥‡æ•°åˆ™æ˜¯ä¹°å…¥ï¼Œ å¶æ•°åˆ™æ˜¯å–å‡ºã€‚
     *
     * å”¯ä¸€è¦æƒ³ä¸€ä¸‹çš„å°±æ˜¯ çŠ¶æ€è½¬ç§»æ–¹ç¨‹ä¸­ï¼Œ å‰ä¸€æ¬¡ ä¹°/å– å¯¹åº”çš„ column å·æ˜¯å¤šå°‘ï¼Œ å…¶å®å°±æ˜¯å¾ˆç®€å•çš„ j-1ã€‚ But you realized it anyway by yourself.
     * So I believe you would be all good.
     * @param k
     * @param prices
     * @return
     */
    public int maxProfit(int k, int[] prices) {
        int[][] dp = new int[prices.length][2*k+1];
        // i = 0 -> ç¬¬1æ¬¡æŒæœ‰0è‚¡ï¼Œ å³ç¬¬ä¸€æ¬¡ä¹°å…¥ä¹‹å‰
        dp[0][0] = 0;

        for (int i = 1; i < 2*k+1; i++) {
            if (i % 2 == 1) {
                // ä¹°å…¥æ“ä½œ
                dp[0][i] = -prices[0];
            } else {
                // å–å‡ºæ“ä½œ
                dp[0][i] = 0;
            }
        }

        for (int i = 1; i < prices.length; i++) {
            // dp[i][0] ä»£è¡¨ä»æœªä¹°å…¥ï¼Œ so it's always 0
            for (int j = 1; j < 2*k+1; j++) {
                // ä¹°å…¥æ“ä½œ, è¡¨ç¤ºæŒæœ‰1è‚¡ -> i-1 å°±æŒæœ‰1è‚¡ï¼Œ æˆ– i-1 è¿˜æ²¡æŒæœ‰
                if (j % 2 == 1) {
                    dp[i][j] = Math.max(dp[i-1][j], dp[i-1][j-1] - prices[i]);
                } else { // å–å‡ºæ“ä½œ, è¡¨ç¤ºæŒæœ‰0è‚¡ -> i-1 å°±æŒæœ‰0è‚¡ï¼Œ æˆ–i-1 å·²ç»æŒæœ‰1è‚¡ï¼Œ ä»Šå¤©å–äº†
                    dp[i][j] = Math.max(dp[i-1][j], dp[i-1][j-1] + prices[i]);
                }
            }
        }

        return dp[dp.length-1][2*k];
    }
}
